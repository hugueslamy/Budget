<!DOCTYPE html>

<html>
<head>
<meta content="text/html; charset=CP850" http-equiv="Content-Type">

<title>class SVG::Graph::Line - RDoc Documentation</title>

<link type="text/css" media="screen" href="../../rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "../../";
</script>

<script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../../js/navigation.js"></script>
<script type="text/javascript" charset="utf-8" src="../../js/search_index.js"></script>
<script type="text/javascript" charset="utf-8" src="../../js/search.js"></script>
<script type="text/javascript" charset="utf-8" src="../../js/searcher.js"></script>
<script type="text/javascript" charset="utf-8" src="../../js/darkfish.js"></script>


<body id="top" class="class">
<nav id="metadata">
  <nav id="home-section" class="section">
  <h3 class="section-header">
    <a href="../../index.html">Home</a>
    <a href="../../table_of_contents.html#classes">Classes</a>
    <a href="../../table_of_contents.html#methods">Methods</a>
  </h3>
</nav>


  <nav id="search-section" class="section project-section" class="initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <h3 class="section-header">
      <input type="text" name="search" placeholder="Search" id="search-field"
             title="Type to search, Up and Down to navigate, Enter to load">
    </h3>
  </form>

  <ul id="search-results" class="initially-hidden"></ul>
</nav>


  <div id="file-metadata">
    <nav id="file-list-section" class="section">
  <h3 class="section-header">Defined In</h3>
  <ul>
    <li>lib/SVG/Graph/Line.rb
  </ul>
</nav>

    
  </div>

  <div id="class-metadata">
    
    <nav id="parent-class-section" class="section">
  <h3 class="section-header">Parent</h3>
  
  <p class="link"><a href="Graph.html">SVG::Graph::Graph</a>
  
</nav>

    
    <!-- Method Quickref -->
<nav id="method-list-section" class="section">
  <h3 class="section-header">Methods</h3>

  <ul class="link-list">
    
    <li><a href="#method-c-new">::new</a>
    
    <li><a href="#method-i-calc_coords">#calc_coords</a>
    
    <li><a href="#method-i-calculate_left_margin">#calculate_left_margin</a>
    
    <li><a href="#method-i-draw_data">#draw_data</a>
    
    <li><a href="#method-i-get_css">#get_css</a>
    
    <li><a href="#method-i-get_x_labels">#get_x_labels</a>
    
    <li><a href="#method-i-get_y_labels">#get_y_labels</a>
    
    <li><a href="#method-i-max_value">#max_value</a>
    
    <li><a href="#method-i-min_value">#min_value</a>
    
    <li><a href="#method-i-set_defaults">#set_defaults</a>
    
  </ul>
</nav>

  </div>

  <div id="project-metadata">
    <nav id="fileindex-section" class="section project-section">
  <h3 class="section-header">Pages</h3>

  <ul>
  
    <li class="file"><a href="../../Gemfile.html">Gemfile</a>
  
    <li class="file"><a href="../../README_rdoc.html">README</a>
  
    <li class="file"><a href="../../Rakefile.html">Rakefile</a>
  
    <li class="file"><a href="../../doc/README_FOR_APP.html">README_FOR_APP</a>
  
    <li class="file"><a href="../../lib/SVG/GPL_txt.html">GPL</a>
  
    <li class="file"><a href="../../lib/SVG/LICENSE_txt.html">LICENSE</a>
  
    <li class="file"><a href="../../proj_tree.html">proj_tree</a>
  
    <li class="file"><a href="../../public/robots_txt.html">robots</a>
  
  </ul>
</nav>

    <nav id="classindex-section" class="section project-section">
  <h3 class="section-header">Class and Module Index</h3>

  <ul class="link-list">
  
    <li><a href="../../SVG.html">SVG</a>
  
    <li><a href="../../SVG/Graph.html">SVG::Graph</a>
  
    <li><a href="../../SVG/Graph/Bar.html">SVG::Graph::Bar</a>
  
    <li><a href="../../SVG/Graph/BarBase.html">SVG::Graph::BarBase</a>
  
    <li><a href="../../SVG/Graph/BarHorizontal.html">SVG::Graph::BarHorizontal</a>
  
    <li><a href="../../SVG/Graph/Graph.html">SVG::Graph::Graph</a>
  
    <li><a href="../../SVG/Graph/Line.html">SVG::Graph::Line</a>
  
    <li><a href="../../SVG/Graph/Pie.html">SVG::Graph::Pie</a>
  
    <li><a href="../../SVG/Graph/Plot.html">SVG::Graph::Plot</a>
  
    <li><a href="../../SVG/Graph/Schedule.html">SVG::Graph::Schedule</a>
  
    <li><a href="../../SVG/Graph/TimeSeries.html">SVG::Graph::TimeSeries</a>
  
    <li><a href="../../ActiveSupport.html">ActiveSupport</a>
  
    <li><a href="../../ActiveSupport/TestCase.html">ActiveSupport::TestCase</a>
  
    <li><a href="../../Budget.html">Budget</a>
  
    <li><a href="../../Budget/Application.html">Budget::Application</a>
  
    <li><a href="../../Account.html">Account</a>
  
    <li><a href="../../AccountTest.html">AccountTest</a>
  
    <li><a href="../../AccountsController.html">AccountsController</a>
  
    <li><a href="../../AccountsControllerTest.html">AccountsControllerTest</a>
  
    <li><a href="../../AccountsHelper.html">AccountsHelper</a>
  
    <li><a href="../../AccountsHelperTest.html">AccountsHelperTest</a>
  
    <li><a href="../../AddProjectDate.html">AddProjectDate</a>
  
    <li><a href="../../Allocation.html">Allocation</a>
  
    <li><a href="../../AllocationTest.html">AllocationTest</a>
  
    <li><a href="../../AllocationsController.html">AllocationsController</a>
  
    <li><a href="../../AllocationsControllerTest.html">AllocationsControllerTest</a>
  
    <li><a href="../../AllocationsHelper.html">AllocationsHelper</a>
  
    <li><a href="../../AllocationsHelperTest.html">AllocationsHelperTest</a>
  
    <li><a href="../../ApplicationController.html">ApplicationController</a>
  
    <li><a href="../../ApplicationHelper.html">ApplicationHelper</a>
  
    <li><a href="../../BrowsingTest.html">BrowsingTest</a>
  
    <li><a href="../../CreateAccounts.html">CreateAccounts</a>
  
    <li><a href="../../CreateAllocations.html">CreateAllocations</a>
  
    <li><a href="../../CreateExpenses.html">CreateExpenses</a>
  
    <li><a href="../../CreateProjects.html">CreateProjects</a>
  
    <li><a href="../../CreateSuppliers.html">CreateSuppliers</a>
  
    <li><a href="../../Expense.html">Expense</a>
  
    <li><a href="../../ExpenseTest.html">ExpenseTest</a>
  
    <li><a href="../../ExpensesController.html">ExpensesController</a>
  
    <li><a href="../../ExpensesControllerTest.html">ExpensesControllerTest</a>
  
    <li><a href="../../ExpensesHelper.html">ExpensesHelper</a>
  
    <li><a href="../../ExpensesHelperTest.html">ExpensesHelperTest</a>
  
    <li><a href="../../Object.html">Object</a>
  
    <li><a href="../../Project.html">Project</a>
  
    <li><a href="../../ProjectTest.html">ProjectTest</a>
  
    <li><a href="../../ProjectsController.html">ProjectsController</a>
  
    <li><a href="../../ProjectsControllerTest.html">ProjectsControllerTest</a>
  
    <li><a href="../../ProjectsHelper.html">ProjectsHelper</a>
  
    <li><a href="../../ProjectsHelperTest.html">ProjectsHelperTest</a>
  
    <li><a href="../../Supplier.html">Supplier</a>
  
    <li><a href="../../SupplierTest.html">SupplierTest</a>
  
    <li><a href="../../SuppliersController.html">SuppliersController</a>
  
    <li><a href="../../SuppliersControllerTest.html">SuppliersControllerTest</a>
  
    <li><a href="../../SuppliersHelper.html">SuppliersHelper</a>
  
    <li><a href="../../SuppliersHelperTest.html">SuppliersHelperTest</a>
  
  </ul>
</nav>

  </div>
</nav>

<div id="documentation">
  <h1 class="class">class SVG::Graph::Line</h1>

  <div id="description" class="description">
    
<h3 id="label-Create+presentation+quality+SVG+line+graphs+easily">Create presentation quality <a href="../../SVG.html">SVG</a> line graphs easily</h3>

<h1 id="label-Synopsis">Synopsis</h1>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">'SVG/Graph/Line'</span>

<span class="ruby-identifier">fields</span> = <span class="ruby-node">%w(Jan Feb Mar)</span>;
<span class="ruby-identifier">data_sales_02</span> = [<span class="ruby-value">12</span>, <span class="ruby-value">45</span>, <span class="ruby-value">21</span>]
<span class="ruby-identifier">data_sales_03</span> = [<span class="ruby-value">15</span>, <span class="ruby-value">30</span>, <span class="ruby-value">40</span>]

<span class="ruby-identifier">graph</span> = <span class="ruby-constant">SVG</span><span class="ruby-operator">::</span><span class="ruby-constant">Graph</span><span class="ruby-operator">::</span><span class="ruby-constant">Line</span>.<span class="ruby-identifier">new</span>({
        :<span class="ruby-identifier">height</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">500</span>,
        :<span class="ruby-identifier">width</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">300</span>,
  :<span class="ruby-identifier">fields</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">fields</span>,
})

<span class="ruby-identifier">graph</span>.<span class="ruby-identifier">add_data</span>({
        :<span class="ruby-identifier">data</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">data_sales_02</span>,
  :<span class="ruby-identifier">title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'Sales 2002'</span>,
})

<span class="ruby-identifier">graph</span>.<span class="ruby-identifier">add_data</span>({
        :<span class="ruby-identifier">data</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">data_sales_03</span>,
  :<span class="ruby-identifier">title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'Sales 2003'</span>,
})

<span class="ruby-identifier">print</span> <span class="ruby-string">&quot;Content-type: image/svg+xml\r\n\r\n&quot;</span>;
<span class="ruby-identifier">print</span> <span class="ruby-identifier">graph</span>.<span class="ruby-identifier">burn</span>();
</pre>

<h1 id="label-Description">Description</h1>

<p>This object aims to allow you to easily create high quality <a
href="../../SVG.html">SVG</a> line graphs. You can either use the default
style sheet or supply your own. Either way there are many options which can
be configured to give you control over how the graph is generated - with or
without a key, data elements at each point, title, subtitle etc.</p>

<h1 id="label-Examples">Examples</h1>

<p><a
href="http://www.germane-software/repositories/public/SVG/test/single.rb">www.germane-software/repositories/public/SVG/test/single.rb</a></p>

<h1 id="label-Notes">Notes</h1>

<p>The default stylesheet handles upto 10 data sets, if you use more you must
create your own stylesheet and add the additional settings for the extra
data sets. You will know if you go over 10 data sets as they will have no
style and be in black.</p>

<h1 id="label-See+also">See also</h1>
<ul><li>
<p><a href="Graph.html">SVG::Graph::Graph</a></p>
</li><li>
<p><a href="BarHorizontal.html">SVG::Graph::BarHorizontal</a></p>
</li><li>
<p><a href="Bar.html">SVG::Graph::Bar</a></p>
</li><li>
<p><a href="Pie.html">SVG::Graph::Pie</a></p>
</li><li>
<p><a href="Plot.html">SVG::Graph::Plot</a></p>
</li><li>
<p><a href="TimeSeries.html">SVG::Graph::TimeSeries</a></p>
</li></ul>

<h2 id="label-Author">Author</h2>

<p>Sean E. Russell &lt;serATgermaneHYPHENsoftwareDOTcom&gt;</p>

<p>Copyright 2004 Sean E. Russell This software is available under the Ruby <a
href="http://LICENSE.txt">license</a></p>

  </div><!-- description -->

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    
    <!-- Attributes -->
    <section id="attribute-method-details" class="method-section section">
      <h3 class="section-header">Attributes</h3>

      
      <div id="attribute-i-area_fill" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">area_fill</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        <p>Fill in the area under the plot if true</p>
        
        </div>
      </div>
      
      <div id="attribute-i-show_data_points" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">show_data_points</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        <p>Show a small circle on the graph where the line goes from one point to the
next.</p>
        
        </div>
      </div>
      
      <div id="attribute-i-stacked" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">stacked</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        <pre>Accumulates each data set. (i.e. Each point increased by sum of</pre>

<p>all previous series at same point). Default is 0, set to '1' to show.</p>
        
        </div>
      </div>
      
    </section><!-- attribute-method-details -->
    

    <!-- Methods -->
    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Public Class Methods</h3>

    
      <div id="method-c-new" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">new</span><span
            class="method-args">(config)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>The constructor takes a hash reference, fields (the names for each field on
the X axis) MUST be set, all other values are defaulted to  those shown
above - with the exception of style_sheet which defaults to using the
internal style sheet.</p>
          

          
          <div class="method-source-code" id="new-source">
            <pre><span class="ruby-comment"># File lib/SVG/Graph/Line.rb, line 85</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span> <span class="ruby-identifier">config</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-string">&quot;fields was not supplied or is empty&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">config</span>[<span class="ruby-value">:fields</span>] <span class="ruby-operator">&amp;&amp;</span>
  <span class="ruby-identifier">config</span>[<span class="ruby-value">:fields</span>].<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">Array</span>) <span class="ruby-operator">&amp;&amp;</span>
  <span class="ruby-identifier">config</span>[<span class="ruby-value">:fields</span>].<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
                          <span class="ruby-keyword">super</span>
                  <span class="ruby-keyword">end</span></pre>
          </div><!-- new-source -->
          
        </div>

        

        
      </div><!-- new-method -->

    
    </section><!-- public-class-method-details -->
  
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Public Instance Methods</h3>

    
      <div id="method-i-set_defaults" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">set_defaults</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>In addition to the defaults set in Graph::initialize, sets</p>
<dl class="rdoc-list label-list"><dt><a href="Line.html#attribute-i-show_data_points">#show_data_points</a>
<dd>
<p>true</p>
</dd><dt>show_data_values
<dd>
<p>true</p>
</dd><dt>stacked
<dd>
<p>false</p>
</dd><dt><a href="Line.html#attribute-i-area_fill">#area_fill</a>
<dd>
<p>false</p>
</dd></dl>
          

          
          <div class="method-source-code" id="set_defaults-source">
            <pre><span class="ruby-comment"># File lib/SVG/Graph/Line.rb, line 97</span>
                  <span class="ruby-keyword">def</span> <span class="ruby-identifier">set_defaults</span>
  <span class="ruby-identifier">init_with</span>(
    <span class="ruby-value">:show_data_points</span>   =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>,
    <span class="ruby-value">:show_data_values</span>   =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>,
    <span class="ruby-value">:stacked</span>            =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">false</span>,
    <span class="ruby-value">:area_fill</span>          =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">false</span>
  )

  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">top_align</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">top_font</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">right_align</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">right_font</span> = <span class="ruby-value">1</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- set_defaults-source -->
          
        </div>

        

        
      </div><!-- set_defaults-method -->

    
    </section><!-- public-instance-method-details -->
  
     <section id="protected-instance-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Protected Instance Methods</h3>

    
      <div id="method-i-calc_coords" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">calc_coords</span><span
            class="method-args">(field, value, width = field_width, height = field_height)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="calc_coords-source">
            <pre><span class="ruby-comment"># File lib/SVG/Graph/Line.rb, line 174</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">calc_coords</span>(<span class="ruby-identifier">field</span>, <span class="ruby-identifier">value</span>, <span class="ruby-identifier">width</span> = <span class="ruby-identifier">field_width</span>, <span class="ruby-identifier">height</span> = <span class="ruby-identifier">field_height</span>)
  <span class="ruby-identifier">coords</span> = {<span class="ruby-value">:x</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>, <span class="ruby-value">:y</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>}
  <span class="ruby-identifier">coords</span>[<span class="ruby-value">:x</span>] = <span class="ruby-identifier">width</span> * <span class="ruby-identifier">field</span>
  <span class="ruby-identifier">coords</span>[<span class="ruby-value">:y</span>] = <span class="ruby-ivar">@graph_height</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">value</span> * <span class="ruby-identifier">height</span>

  <span class="ruby-keyword">return</span> <span class="ruby-identifier">coords</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- calc_coords-source -->
          
        </div>

        

        
      </div><!-- calc_coords-method -->

    
      <div id="method-i-calculate_left_margin" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">calculate_left_margin</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="calculate_left_margin-source">
            <pre><span class="ruby-comment"># File lib/SVG/Graph/Line.rb, line 148</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">calculate_left_margin</span>
  <span class="ruby-keyword">super</span>
  <span class="ruby-identifier">label_left</span> = <span class="ruby-ivar">@config</span>[<span class="ruby-value">:fields</span>][<span class="ruby-value">0</span>].<span class="ruby-identifier">length</span> <span class="ruby-operator">/</span> <span class="ruby-value">2</span> * <span class="ruby-identifier">font_size</span> * <span class="ruby-value">0.6</span>
  <span class="ruby-ivar">@border_left</span> = <span class="ruby-identifier">label_left</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">label_left</span> <span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@border_left</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- calculate_left_margin-source -->
          
        </div>

        

        
      </div><!-- calculate_left_margin-method -->

    
      <div id="method-i-draw_data" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">draw_data</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="draw_data-source">
            <pre><span class="ruby-comment"># File lib/SVG/Graph/Line.rb, line 182</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">draw_data</span>
  <span class="ruby-identifier">minvalue</span> = <span class="ruby-identifier">min_value</span>
  <span class="ruby-identifier">fieldheight</span> = (<span class="ruby-ivar">@graph_height</span>.<span class="ruby-identifier">to_f</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">font_size</span>*<span class="ruby-value">2</span>*<span class="ruby-identifier">top_font</span>) <span class="ruby-operator">/</span> 
                   (<span class="ruby-identifier">get_y_labels</span>.<span class="ruby-identifier">max</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">get_y_labels</span>.<span class="ruby-identifier">min</span>)
  <span class="ruby-identifier">fieldwidth</span> = <span class="ruby-identifier">field_width</span>
  <span class="ruby-identifier">line</span> = <span class="ruby-ivar">@data</span>.<span class="ruby-identifier">length</span>

  <span class="ruby-identifier">prev_sum</span> = <span class="ruby-constant">Array</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@config</span>[<span class="ruby-value">:fields</span>].<span class="ruby-identifier">length</span>).<span class="ruby-identifier">fill</span>(<span class="ruby-value">0</span>)
  <span class="ruby-identifier">cum_sum</span> = <span class="ruby-constant">Array</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@config</span>[<span class="ruby-value">:fields</span>].<span class="ruby-identifier">length</span>).<span class="ruby-identifier">fill</span>(<span class="ruby-operator">-</span><span class="ruby-identifier">minvalue</span>)

  <span class="ruby-keyword">for</span> <span class="ruby-identifier">data</span> <span class="ruby-keyword">in</span> <span class="ruby-ivar">@data</span>.<span class="ruby-identifier">reverse</span>
    <span class="ruby-identifier">lpath</span> = <span class="ruby-string">&quot;&quot;</span>
    <span class="ruby-identifier">apath</span> = <span class="ruby-string">&quot;&quot;</span>

    <span class="ruby-keyword">if</span> <span class="ruby-keyword">not</span> <span class="ruby-identifier">stacked</span> <span class="ruby-keyword">then</span> <span class="ruby-identifier">cum_sum</span>.<span class="ruby-identifier">fill</span>(<span class="ruby-operator">-</span><span class="ruby-identifier">minvalue</span>) <span class="ruby-keyword">end</span>
    
    <span class="ruby-identifier">data</span>[<span class="ruby-value">:data</span>].<span class="ruby-identifier">each_index</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">cum_sum</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">+=</span> <span class="ruby-identifier">data</span>[<span class="ruby-value">:data</span>][<span class="ruby-identifier">i</span>]
      
      <span class="ruby-identifier">c</span> = <span class="ruby-identifier">calc_coords</span>(<span class="ruby-identifier">i</span>, <span class="ruby-identifier">cum_sum</span>[<span class="ruby-identifier">i</span>], <span class="ruby-identifier">fieldwidth</span>, <span class="ruby-identifier">fieldheight</span>)
      
      <span class="ruby-identifier">lpath</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;#{c[:x]} #{c[:y]} &quot;</span>
    <span class="ruby-keyword">end</span>
  
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">area_fill</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">stacked</span> <span class="ruby-keyword">then</span>
        (<span class="ruby-identifier">prev_sum</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>).<span class="ruby-identifier">downto</span> <span class="ruby-value">0</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
          <span class="ruby-identifier">c</span> = <span class="ruby-identifier">calc_coords</span>(<span class="ruby-identifier">i</span>, <span class="ruby-identifier">prev_sum</span>[<span class="ruby-identifier">i</span>], <span class="ruby-identifier">fieldwidth</span>, <span class="ruby-identifier">fieldheight</span>)
          
          <span class="ruby-identifier">apath</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;#{c[:x]} #{c[:y]} &quot;</span>
        <span class="ruby-keyword">end</span>
    
        <span class="ruby-identifier">c</span> = <span class="ruby-identifier">calc_coords</span>(<span class="ruby-value">0</span>, <span class="ruby-identifier">prev_sum</span>[<span class="ruby-value">0</span>], <span class="ruby-identifier">fieldwidth</span>, <span class="ruby-identifier">fieldheight</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">apath</span> = <span class="ruby-node">&quot;V#@graph_height&quot;</span>
        <span class="ruby-identifier">c</span> = <span class="ruby-identifier">calc_coords</span>(<span class="ruby-value">0</span>, <span class="ruby-value">0</span>, <span class="ruby-identifier">fieldwidth</span>, <span class="ruby-identifier">fieldheight</span>)
      <span class="ruby-keyword">end</span>
        
      <span class="ruby-ivar">@graph</span>.<span class="ruby-identifier">add_element</span>(<span class="ruby-string">&quot;path&quot;</span>, {
        <span class="ruby-string">&quot;d&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;M#{c[:x]} #{c[:y]} L&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">lpath</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">apath</span> <span class="ruby-operator">+</span> <span class="ruby-string">&quot;Z&quot;</span>,
        <span class="ruby-string">&quot;class&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;fill#{line}&quot;</span>
      })
    <span class="ruby-keyword">end</span>
  
    <span class="ruby-ivar">@graph</span>.<span class="ruby-identifier">add_element</span>(<span class="ruby-string">&quot;path&quot;</span>, {
      <span class="ruby-string">&quot;d&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;M0 #@graph_height L&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">lpath</span>,
      <span class="ruby-string">&quot;class&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;line#{line}&quot;</span>
    })
    
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">show_data_points</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">show_data_values</span>
      <span class="ruby-identifier">cum_sum</span>.<span class="ruby-identifier">each_index</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">show_data_points</span>
          <span class="ruby-ivar">@graph</span>.<span class="ruby-identifier">add_element</span>( <span class="ruby-string">&quot;circle&quot;</span>, {
            <span class="ruby-string">&quot;cx&quot;</span> =<span class="ruby-operator">&gt;</span> (<span class="ruby-identifier">fieldwidth</span> * <span class="ruby-identifier">i</span>).<span class="ruby-identifier">to_s</span>,
            <span class="ruby-string">&quot;cy&quot;</span> =<span class="ruby-operator">&gt;</span> (<span class="ruby-ivar">@graph_height</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">cum_sum</span>[<span class="ruby-identifier">i</span>] * <span class="ruby-identifier">fieldheight</span>).<span class="ruby-identifier">to_s</span>,
            <span class="ruby-string">&quot;r&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;2.5&quot;</span>,
            <span class="ruby-string">&quot;class&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;dataPoint#{line}&quot;</span>
          })
        <span class="ruby-keyword">end</span>
        <span class="ruby-identifier">make_datapoint_text</span>( 
          <span class="ruby-identifier">fieldwidth</span> * <span class="ruby-identifier">i</span>, 
          <span class="ruby-ivar">@graph_height</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">cum_sum</span>[<span class="ruby-identifier">i</span>] * <span class="ruby-identifier">fieldheight</span> <span class="ruby-operator">-</span> <span class="ruby-value">6</span>,
          <span class="ruby-identifier">cum_sum</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">+</span> <span class="ruby-identifier">minvalue</span>
        )
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">prev_sum</span> = <span class="ruby-identifier">cum_sum</span>.<span class="ruby-identifier">dup</span>
    <span class="ruby-identifier">line</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- draw_data-source -->
          
        </div>

        

        
      </div><!-- draw_data-method -->

    
      <div id="method-i-get_css" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">get_css</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="get_css-source">
            <pre><span class="ruby-comment"># File lib/SVG/Graph/Line.rb, line 255</span>
      <span class="ruby-keyword">def</span> <span class="ruby-identifier">get_css</span>
        <span class="ruby-keyword">return</span> <span class="ruby-string">&quot;/* default line styles */
.line1{
        fill: none;
        stroke: #ff0000;
        stroke-width: 1px;     
}
.line2{
        fill: none;
        stroke: #0000ff;
        stroke-width: 1px;     
}
.line3{
        fill: none;
        stroke: #00ff00;
        stroke-width: 1px;     
}
.line4{
        fill: none;
        stroke: #ffcc00;
        stroke-width: 1px;     
}
.line5{
        fill: none;
        stroke: #00ccff;
        stroke-width: 1px;     
}
.line6{
        fill: none;
        stroke: #ff00ff;
        stroke-width: 1px;     
}
.line7{
        fill: none;
        stroke: #00ffff;
        stroke-width: 1px;     
}
.line8{
        fill: none;
        stroke: #ffff00;
        stroke-width: 1px;     
}
.line9{
        fill: none;
        stroke: #ccc6666;
        stroke-width: 1px;     
}
.line10{
        fill: none;
        stroke: #663399;
        stroke-width: 1px;     
}
.line11{
        fill: none;
        stroke: #339900;
        stroke-width: 1px;     
}
.line12{
        fill: none;
        stroke: #9966FF;
        stroke-width: 1px;     
}
/* default fill styles */
.fill1{
        fill: #cc0000;
        fill-opacity: 0.2;
        stroke: none;
}
.fill2{
        fill: #0000cc;
        fill-opacity: 0.2;
        stroke: none;
}
.fill3{
        fill: #00cc00;
        fill-opacity: 0.2;
        stroke: none;
}
.fill4{
        fill: #ffcc00;
        fill-opacity: 0.2;
        stroke: none;
}
.fill5{
        fill: #00ccff;
        fill-opacity: 0.2;
        stroke: none;
}
.fill6{
        fill: #ff00ff;
        fill-opacity: 0.2;
        stroke: none;
}
.fill7{
        fill: #00ffff;
        fill-opacity: 0.2;
        stroke: none;
}
.fill8{
        fill: #ffff00;
        fill-opacity: 0.2;
        stroke: none;
}
.fill9{
        fill: #cc6666;
        fill-opacity: 0.2;
        stroke: none;
}
.fill10{
        fill: #663399;
        fill-opacity: 0.2;
        stroke: none;
}
.fill11{
        fill: #339900;
        fill-opacity: 0.2;
        stroke: none;
}
.fill12{
        fill: #9966FF;
        fill-opacity: 0.2;
        stroke: none;
}
/* default line styles */
.key1,.dataPoint1{
        fill: #ff0000;
        stroke: none;
        stroke-width: 1px;     
}
.key2,.dataPoint2{
        fill: #0000ff;
        stroke: none;
        stroke-width: 1px;     
}
.key3,.dataPoint3{
        fill: #00ff00;
        stroke: none;
        stroke-width: 1px;     
}
.key4,.dataPoint4{
        fill: #ffcc00;
        stroke: none;
        stroke-width: 1px;     
}
.key5,.dataPoint5{
        fill: #00ccff;
        stroke: none;
        stroke-width: 1px;     
}
.key6,.dataPoint6{
        fill: #ff00ff;
        stroke: none;
        stroke-width: 1px;     
}
.key7,.dataPoint7{
        fill: #00ffff;
        stroke: none;
        stroke-width: 1px;     
}
.key8,.dataPoint8{
        fill: #ffff00;
        stroke: none;
        stroke-width: 1px;     
}
.key9,.dataPoint9{
        fill: #cc6666;
        stroke: none;
        stroke-width: 1px;     
}
.key10,.dataPoint10{
        fill: #663399;
        stroke: none;
        stroke-width: 1px;     
}
.key11,.dataPoint11{
        fill: #339900;
        stroke: none;
        stroke-width: 1px;     
}
.key12,.dataPoint12{
        fill: #9966FF;
        stroke: none;
        stroke-width: 1px;     
}
&quot;</span>
      <span class="ruby-keyword">end</span></pre>
          </div><!-- get_css-source -->
          
        </div>

        

        
      </div><!-- get_css-method -->

    
      <div id="method-i-get_x_labels" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">get_x_labels</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="get_x_labels-source">
            <pre><span class="ruby-comment"># File lib/SVG/Graph/Line.rb, line 144</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">get_x_labels</span>
  <span class="ruby-ivar">@config</span>[<span class="ruby-value">:fields</span>]
<span class="ruby-keyword">end</span></pre>
          </div><!-- get_x_labels-source -->
          
        </div>

        

        
      </div><!-- get_x_labels-method -->

    
      <div id="method-i-get_y_labels" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">get_y_labels</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="get_y_labels-source">
            <pre><span class="ruby-comment"># File lib/SVG/Graph/Line.rb, line 154</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">get_y_labels</span>
  <span class="ruby-identifier">maxvalue</span> = <span class="ruby-identifier">max_value</span>
  <span class="ruby-identifier">minvalue</span> = <span class="ruby-identifier">min_value</span>
  <span class="ruby-identifier">range</span> = <span class="ruby-identifier">maxvalue</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">minvalue</span>
  <span class="ruby-identifier">top_pad</span> = <span class="ruby-identifier">range</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span> <span class="ruby-operator">?</span> <span class="ruby-value">10</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">range</span> <span class="ruby-operator">/</span> <span class="ruby-value">20.0</span>
  <span class="ruby-identifier">scale_range</span> = (<span class="ruby-identifier">maxvalue</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">top_pad</span>) <span class="ruby-operator">-</span> <span class="ruby-identifier">minvalue</span>

  <span class="ruby-identifier">scale_division</span> = <span class="ruby-identifier">scale_divisions</span> <span class="ruby-operator">||</span> (<span class="ruby-identifier">scale_range</span> <span class="ruby-operator">/</span> <span class="ruby-value">10.0</span>)

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">scale_integers</span>
    <span class="ruby-identifier">scale_division</span> = <span class="ruby-identifier">scale_division</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">1</span> <span class="ruby-operator">?</span> <span class="ruby-value">1</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">scale_division</span>.<span class="ruby-identifier">round</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">rv</span> = []
  <span class="ruby-identifier">maxvalue</span> = <span class="ruby-identifier">maxvalue</span><span class="ruby-operator">%</span><span class="ruby-identifier">scale_division</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span> <span class="ruby-operator">?</span> 
    <span class="ruby-identifier">maxvalue</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">maxvalue</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">scale_division</span>
  <span class="ruby-identifier">minvalue</span>.<span class="ruby-identifier">step</span>( <span class="ruby-identifier">maxvalue</span>, <span class="ruby-identifier">scale_division</span> ) {<span class="ruby-operator">|</span><span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-identifier">rv</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">v</span>}
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">rv</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- get_y_labels-source -->
          
        </div>

        

        
      </div><!-- get_y_labels-method -->

    
      <div id="method-i-max_value" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">max_value</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="max_value-source">
            <pre><span class="ruby-comment"># File lib/SVG/Graph/Line.rb, line 110</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">max_value</span>
  <span class="ruby-identifier">max</span> = <span class="ruby-value">0</span>
  
  <span class="ruby-keyword">if</span> (<span class="ruby-identifier">stacked</span> <span class="ruby-operator">==</span> <span class="ruby-keyword">true</span>) <span class="ruby-keyword">then</span>
    <span class="ruby-identifier">sums</span> = <span class="ruby-constant">Array</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@config</span>[<span class="ruby-value">:fields</span>].<span class="ruby-identifier">length</span>).<span class="ruby-identifier">fill</span>(<span class="ruby-value">0</span>)

    <span class="ruby-ivar">@data</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">data</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">sums</span>.<span class="ruby-identifier">each_index</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
        <span class="ruby-identifier">sums</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">+=</span> <span class="ruby-identifier">data</span>[<span class="ruby-value">:data</span>][<span class="ruby-identifier">i</span>].<span class="ruby-identifier">to_f</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
    
    <span class="ruby-identifier">max</span> = <span class="ruby-identifier">sums</span>.<span class="ruby-identifier">max</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">max</span> = <span class="ruby-ivar">@data</span>.<span class="ruby-identifier">collect</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-identifier">x</span>[<span class="ruby-value">:data</span>].<span class="ruby-identifier">max</span>}.<span class="ruby-identifier">max</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">return</span> <span class="ruby-identifier">max</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- max_value-source -->
          
        </div>

        

        
      </div><!-- max_value-method -->

    
      <div id="method-i-min_value" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">min_value</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="min_value-source">
            <pre><span class="ruby-comment"># File lib/SVG/Graph/Line.rb, line 130</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">min_value</span>
  <span class="ruby-identifier">min</span> = <span class="ruby-value">0</span>
  
  <span class="ruby-keyword">if</span> (<span class="ruby-identifier">min_scale_value</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">==</span> <span class="ruby-keyword">false</span>) <span class="ruby-keyword">then</span>
    <span class="ruby-identifier">min</span> = <span class="ruby-identifier">min_scale_value</span>
  <span class="ruby-keyword">elsif</span> (<span class="ruby-identifier">stacked</span> <span class="ruby-operator">==</span> <span class="ruby-keyword">true</span>) <span class="ruby-keyword">then</span>
    <span class="ruby-identifier">min</span> = <span class="ruby-ivar">@data</span>[<span class="ruby-value">-1</span>][<span class="ruby-value">:data</span>].<span class="ruby-identifier">min</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">min</span> = <span class="ruby-ivar">@data</span>.<span class="ruby-identifier">collect</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-identifier">x</span>[<span class="ruby-value">:data</span>].<span class="ruby-identifier">min</span>}.<span class="ruby-identifier">min</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">return</span> <span class="ruby-identifier">min</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- min_value-source -->
          
        </div>

        

        
      </div><!-- min_value-method -->

    
    </section><!-- protected-instance-method-details -->
  
  </section><!-- 5Buntitled-5D -->

</div><!-- documentation -->


<footer id="validator-badges">
  <p><a href="http://validator.w3.org/check/referer">[Validate]</a>
  <p>Generated by <a href="https://github.com/rdoc/rdoc">RDoc</a> 3.12.
  <p>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish Rdoc Generator</a> 3.
</footer>

